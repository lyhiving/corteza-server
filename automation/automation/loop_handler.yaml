name: loop

imports:
  - io


functions:
  sequence:
    type: iterator
    meta:
      short: Iterates over sequence of numbers
    params:
      first: { types: [ { wf: Integer, go: 'int64' } ] }
      last:  { types: [ { wf: Integer, go: 'int64' } ] }
      step:  { types: [ { wf: Integer, go: 'int64' } ] }
    results:
      counter:
        wf: Integer
        go: int
      isFirst:
        wf: Boolean
        go: bool
      isLast:
        wf: Boolean
        go: bool

  do:
    type: iterator
    meta:
      short: Iterates while condition is true
    params:
      while:
        required: true
        types: [ { wf: String, go: 'string' } ]
        meta:
          label: Expression tested before each iteration
          description: Expression to be evaluated each iteration; loop will continue until expression is true

  each:
    type: iterator
    meta:
      short: Iterates over set of items
    params:
      items:
        required: true
        types: [ { wf: Any, go: "[]interface{}" } ]
    results:
      item:
        wf: Any
        go: 'interface{}'

  lines:
    type: iterator
    meta:
      short: Iterates over lines from stream
    params:
      stream:
        required: true
        types: [ { wf: Reader, go: "io.Reader" } ]
    results:
      line:
        wf: String
        go: string
